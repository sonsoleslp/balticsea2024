(()=>{function o(r){let{wait:o="raf",immediate:a=!1}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s="raf"===o;if(s||"number"==typeof o){let i;return function(){let t=this,e=arguments;var n=a&&!i;i&&(s?window.cancelAnimationFrame(i):clearTimeout(i)),i=s?window.requestAnimationFrame(()=>r.apply(t,e)):setTimeout(()=>{i=null,a||r.apply(t,e)},o),n&&r.apply(t,e)}}}function a(){this.listeners={}}var s,c,l,u,d,h;function t(){return h}function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t){return{ev:(t=t.split("."))[0],ns:t[1]||null}}function _(t,e){for(var n=[],i=0;t[i];++i)e(t[i])||n.push(t[i]);return n}a.prototype={on:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({fn:e,scope:n||null})},off:function(t,e){if(!this.listeners[t])return!1;e||(this.listeners[t]=[]);for(var n=this.listeners[t].length;n--;)this.listeners[t][n].fn===e&&this.listeners[t].splice(n,1);return this.listeners[t].length||(this.listeners[t]=null),!0},emit:function(t){for(var e=this.listeners[t]||[],n=[].slice.call(arguments,1),i=0;e[i];++i)e[i].fn.apply(e[i].scope,n)}},s=window,c={},l={},u={};var f=t;let n=(t,e,n)=>{let i;if(void 0===e)throw new Error("Missing namespace in `createEvent` function");return i="function"==typeof window.CustomEvent?new CustomEvent("".concat(e,":").concat(t),n):(e="".concat(e,":").concat(t),t=(t=n)||{bubbles:!1,cancelable:!1,detail:null},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n)},i={TARGET_HIDE_CLASS:"u-js-hide",TRIGGER_OPEN_CLASS:"is-open",TRIGGER_OPEN_LABEL:void 0,CLOSE_ON_FOCUS_OUT:!0,CLOSE_ON_DOCUMENT_CLICK:!0,AUTOFOCUS:null,OPEN_EVENT:!(h={on:function(t,e,n){for(var i=t.split(/\s+/),r=0;i[r];++r)"complete"===s.document.readyState&&i[r].match(/^load(\.|$)/)?((t,e,n)=>{s.requestAnimationFrame(function(){e.call(n||null,{type:t})})})("load",e,n):((t,e,n)=>{var i=(t=p(t)).ev,t=t.ns;u[i]||(d[i]=function(t){h.notify(i,t)},s.addEventListener(i,d[i],!1),u[i]=!0),l[i]||(l[i]=[]),l[i].push({fn:e,ns:t,scope:n||null})})(i[r],e,n)},off:function(t,e){for(var n=t.split(/\s+/),i=0,r=0;n[r];++r)i+=((t,e)=>{var n=(t=p(t)).ev,i=t.ns;return!!l[n]&&(l[n]=i&&e?_(l[n],function(t){return t.ns===i&&t.fn===e}):i?_(l[n],function(t){return t.ns===i}):e?_(l[n],function(t){return t.fn===e}):[],0<!l[n].length&&(l[n]=null),!0)})(n[r],e)?1:0;return i},reset:function(){for(var t in u)e(u,t)&&s.removeEventListener(t,d[t],!1);for(t in c)e(c,t)&&c[t]&&s.cancelAnimationFrame(c[t]);l={},c={},u={},d={}},notify:function(i,r){!c[i]&&l[i]&&(c[i]=s.requestAnimationFrame(function(){for(var t=r,e=l[i]||[],n=0;e[n];++n)e[n].fn.call(e[n].scope,t);c[i]=!1}))}}),DEFAULT_OPEN:!(d={})},r=class{constructor(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this._options=Object.assign({},i,n),this._autoFocusElement=t,this._triggerEl=t,this._targetEl=e,this._originalTriggerText=t.textContent,this._isOpen=this._options.DEFAULT_OPEN,this._handleButtonClick=this._handleButtonClick.bind(this),this._handleButtonKeydown=this._handleButtonKeydown.bind(this),this._handleDocumentClick=this._handleDocumentClick.bind(this),this._handleDocumentKeydown=this._handleDocumentKeydown.bind(this)}_handleButtonClick(t){t.preventDefault(),this._isOpen?this.close():this.open()}_handleButtonKeydown(t){"Enter"!==t.key&&" "!==t.key&&"Spacebar"!==t.key||(t.preventDefault(),this._isOpen?this.close():this.open())}_handleDocumentKeydown(t){"Escape"===t.key&&(this.close(),this._triggerEl.focus()),this._options.CLOSE_ON_FOCUS_OUT&&("Tab"!==t.key||!0!==t.shiftKey||t.target!==this._targetTabbableItems[0]&&t.target!==this._triggerEl&&t.target!==this._targetEl||(t.preventDefault(),window.requestAnimationFrame(()=>{this.close(),this._triggerEl.focus()})),"Tab"===t.key)&&!1===t.shiftKey&&t.target===this._targetTabbableItems[this._targetTabbableItems.length-1]&&(t.preventDefault(),window.requestAnimationFrame(()=>{this.close(),this._triggerEl.focus()}))}_handleDocumentClick(t){t=t.target;t===this._targetEl||t===this._triggerEl||this._targetEl.contains(t)||this._triggerEl.contains(t)||!this._options.CLOSE_ON_DOCUMENT_CLICK||this.close()}_setupTemporaryEventListeners(){document.addEventListener("keydown",this._handleDocumentKeydown),this._options.CLOSE_ON_FOCUS_OUT&&document.addEventListener("click",this._handleDocumentClick)}_removeTemporaryEventListeners(){document.removeEventListener("keydown",this._handleDocumentKeydown),this._options.CLOSE_ON_FOCUS_OUT&&document.removeEventListener("click",this._handleDocumentClick)}_updateAttributes(){this._triggerEl.setAttribute("aria-expanded",this._isOpen.toString()),this._isOpen?this._targetEl.removeAttribute("hidden"):this._targetEl.setAttribute("hidden","")}_updateClassAttributes(){this._isOpen?(this._triggerEl.classList.add(this._options.TRIGGER_OPEN_CLASS),this._targetEl.classList.remove(this._options.TARGET_HIDE_CLASS)):(this._triggerEl.classList.remove(this._options.TRIGGER_OPEN_CLASS),this._targetEl.classList.add(this._options.TARGET_HIDE_CLASS))}_updateTriggerLabel(){this._options.TRIGGER_OPEN_LABEL&&(this._triggerEl.textContent=this._isOpen?this._options.TRIGGER_OPEN_LABEL:this._originalTriggerText)}_updateTabbableItems(){this._targetTabbableItems=(t=>{let e=[];return t&&Array.prototype.forEach.call(t,function(t){e.push(t)}),e})(this._targetEl.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(t=>"hidden"!==window.getComputedStyle(t).getPropertyValue("visibility"))}_handleAutoFocus(){"target"===this._options.AUTOFOCUS&&(this._autoFocusElement=this._targetEl,this._targetEl.setAttribute("tabindex","-1")),"firstTabbable"===this._options.AUTOFOCUS&&(this._autoFocusElement=0<this._targetTabbableItems.length&&this._targetTabbableItems[0],this._autoFocusElement.setSelectionRange)&&this._autoFocusElement.setSelectionRange(0,this._autoFocusElement.value.length),this._autoFocusElement.focus()}open(){var t;this._isOpen||(this._isOpen=!0,this._updateTriggerLabel(),this._updateAttributes(),this._updateClassAttributes(),this._updateTabbableItems(),this._setupTemporaryEventListeners(),this._handleAutoFocus(),this._options.OPEN_EVENT&&(t=n("open","globalExpander",{bubbles:!1}),this._triggerEl.dispatchEvent(t)))}close(){this._isOpen&&(this._isOpen=!1,this._updateTriggerLabel(),this._updateAttributes(),this._updateClassAttributes(),this._removeTemporaryEventListeners())}init(){var t;"A"===this._triggerEl.tagName&&"#"===this._triggerEl.getAttribute("href").charAt(0)&&(this._triggerEl.setAttribute("href","javascript:;"),this._triggerEl.setAttribute("role","button")),null===this._triggerEl.getAttribute("aria-controls")&&(0<this._targetEl.id.length?this._triggerEl.setAttribute("aria-controls",this._targetEl.id):(t=(Math.random()+1).toString(36).substring(4),this._triggerEl.setAttribute("aria-controls",t),this._targetEl.setAttribute("id",t))),this._options.AUTOFOCUS&&this._triggerEl.setAttribute("aria-haspopup","true"),this._updateTriggerLabel(),this._updateAttributes(),this._updateClassAttributes(),this._triggerEl.addEventListener("click",this._handleButtonClick),this._triggerEl.addEventListener("keydown",this._handleButtonKeydown)}},m=class{constructor(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this._trigger=t,this._id=e,this._options=n,this._content=document.querySelector("#".concat(this._id)),this._className="c-popup",this._isOpen=!1,this._arrowClass="".concat(this._className,"__arrow"),this._closeClass="".concat(this._className,"__close"),this._closeTextClass="".concat(this._className,"__close-text"),this._closeButton='<button class="'.concat(this._closeClass,'"><span class="').concat(this._closeTextClass,'">Close</span></button>'),this._arrow='<div class="'.concat(this._arrowClass,'"></div>'),this._closeHandler=()=>{this._close()},this._build(),this._expander=new r(this._trigger,this._content,{OPEN_EVENT:!0}),this._bindEvents()}open(){this._expander.open()}_build(){this._content.insertAdjacentHTML("beforeend",this._closeButton+this._arrow),document.body.appendChild(this._content)}_getCloseButton(){return this._content.querySelector(".".concat(this._closeClass))}_positionPopup(){this._isOpen=!0,this._options.MAX_WIDTH&&(this._content.style.maxWidth=this._options.MAX_WIDTH),this._options.MIN_WIDTH&&(this._content.style.minWidth=this._options.MIN_WIDTH);var t=this._calcPositioning();this._content.style.top=this._px(t.top),this._content.style.left=this._px(t.left),this._content.style.right=this._px(t.right)}_close(){this._expander.close(),this._isOpen=!1,window.removeEventListener("resize",this._closeHandler)}_px(t){return t+"px"}_bindEvents(){this._expander.init(),this._trigger.addEventListener("globalExpander:open",t=>{t.preventDefault(),this._isOpen||(requestAnimationFrame(()=>{this._positionPopup(),this._content.focus()}),window.addEventListener("resize",function(r){let{wait:o="raf",immediate:a=!1}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s="raf"===o;if(s||"number"==typeof o){let i;return function(){let t=this,e=arguments;var n=a&&!i;i&&(s?window.cancelAnimationFrame(i):clearTimeout(i)),i=s?window.requestAnimationFrame(()=>r.apply(t,e)):setTimeout(()=>{i=null,a||r.apply(t,e)},o),n&&r.apply(t,e)}}}(()=>{this._closeHandler()},{wait:60})))}),this._getCloseButton().addEventListener("click",t=>{t.preventDefault(),this._close()}),this._getCloseButton().addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key&&"Spacebar"!==t.key||(t.preventDefault(),this._close(),this._trigger.focus())}),this._content.addEventListener("keydown",t=>{"Escape"===t.key&&(t.preventDefault(),this._close(),this._trigger.focus())})}_calcPositioning(){var t=document.documentElement.scrollTop,e=this._trigger.getClientRects(),e=0<e.length?e[0]:{top:0,left:0},n={top:e.top+t,left:e.left,right:5},i=n.left,r=this._content.querySelector(".".concat(this._arrowClass)),o=document.documentElement.clientWidth,a=this._options.PAGE_PADDING||32,s=n.top-this._content.offsetHeight-12,c=n.top-this._content.offsetHeight-12,l=n.top+e.height+12,a=n.left+this._content.offsetWidth-o+a;0<a&&(a>n.left?n.left=5:n.left-=a);let u=!1;1<e.length&&(u=!0,1024<o)&&(n.left=e.left-this._content.offsetWidth/2+20);let d;return s<t?(d=l,r.classList.remove(this._arrowClass+"--above"),r.classList.add(this._arrowClass+"--below")):(d=c,r.classList.remove(this._arrowClass+"--below"),r.classList.add(this._arrowClass+"--above")),o<768?r.style.left=this._px(i+5):u?(s=Math.round(n.left+this._content.offsetWidth-e.left-20),r.style.left=this._px(Math.round(this._content.offsetWidth-s))):r.style.left=this._px(Math.max(Math.round(e.width/2-10)+(0<a?a:0),5)),{left:o<768?5:n.left,top:d,right:5}}},g="data-author-popup",b="researcher popup with profile",v="researcher popup with no profile",y="u-js-hide",E={profileElement:{value:void 0},researcherProfileLink:new Map,researcherProfileStatus:new Map,authorPosition:new Map,matchingResearchers:new Map};function S(){var t;return void 0===E.profileElement.value&&(t=document.querySelector("#researcher-profile-container"),E.profileElement.value=t||null),E.profileElement.value}function A(t){if(E.researcherProfileStatus.has(t))return E.researcherProfileStatus.get(t);var e=S();if(e){var n=C(t);if(!(n<0))return e=1===L(e,n).length,E.researcherProfileStatus.set(t,e),e}E.researcherProfileStatus.set(t,!1)}function C(e){if(E.authorPosition.has(e))return E.authorPosition.get(e);var t=document.querySelector("ol.c-article-authors-search");if(t){var n=t.querySelectorAll("li");for(let t=0;t<n.length;t++)if(n[t].id===e)return E.authorPosition.set(e,t),t}return E.authorPosition.set(e,-1),-1}function L(t,e){var n="".concat(t?t.id:"null","_").concat(e);if(E.matchingResearchers.has(n))return E.matchingResearchers.get(n);let i=Number(e);return i<0?(E.matchingResearchers.set(n,!1),!1):(e=t.querySelectorAll("li"),t=Array.from(e).filter(t=>Number(t.getAttribute("data-profile-index"))===i),E.matchingResearchers.set(n,t),t)}let w=function(t){return Array.prototype.slice.call(t,0)},k=function(t){t&&t.focus()},x=function(t){var e=t&&t.querySelector("svg");e&&t.removeChild(e)},T=function(t){return t&&"true"===t.getAttribute("data-present-affiliation")},q=function(t){return t.replaceAll(/<(div|p)[^>]*>/g,"<span>").replaceAll(/<\/(div|p)>/g,"</span>")},O=function(t,e){var n="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xlink",r=document.createElementNS(n,"svg"),e=(r.setAttributeNS(i,"xlink:href","#".concat(t)),r.setAttribute("class",e),r.setAttribute("width","24"),r.setAttribute("height","24"),r.setAttribute("aria-hidden","true"),r.setAttribute("focusable","false"),document.createElementNS(n,"use"));return e.setAttributeNS(i,"xlink:href","#".concat(t)),e.setAttribute("xlink:href","#".concat(t)),r.appendChild(e),r};function F(){return{create:function(a){function i(t){let c=(d="app-researcher-popup")+"__link",l=d+"__contact",u=d+"__contact-icon";function e(t,e,r){var n=(n=t.getAttribute("data-corresp-id"))?document.querySelector("#corresp-"+n):null;let i=[],o=[],a=[];w(e.querySelectorAll("sup > a")).forEach(function(t){T(t.nextElementSibling)||i.push(t.hash)}),i.forEach(function(t){var e,n,t=document.querySelector(t);t&&(n=t.querySelector(".c-article-author-affiliation__address"),e=t.getAttribute("id"),null!==n&&a.push(q(n.innerHTML)),null!==e)&&-1<e.indexOf("n")&&((n=t.querySelector(".js-present-address"))?o.push(q(n.innerHTML)):o.push(q(t.innerHTML)))});var s=o.concat(a);return s=(t=>{let n;if(0!==t.length)return(n=document.createElement("ul")).className="app-researcher-popup__author-list",t.forEach(t=>{var e=document.createElement("li");e.innerHTML=t,n.appendChild(e)}),n})(s),t=((t,e,n)=>{t=((t,e)=>{var n,i;if(e)return(n=document.createElement("span")).className=l,(i=document.createElement("span")).innerHTML="Contact ".concat(t.innerHTML),(t=document.createElement("a")).setAttribute("data-track","click_corresponding_email"),t.href=e.getAttribute("href"),t.className=c,t.rel="nofollow",t.appendChild(O("icon-eds-i-mail-medium","".concat(u))),t.appendChild(i),n.appendChild(t),n})(t,e),e=((t,e)=>{var n,t=t.querySelector("a.js-orcid");if(t&&!A(e))return(e=document.createElement("span")).className=l,(n=document.createElement("a")).setAttribute("data-track","click_orcid"),n.className=c,n.href=t.getAttribute("href"),n.target="_blank",n.rel="noopener",n.appendChild(O("icon-orcid-logo","".concat(u," ").concat("app-researcher-popup__contact-icon--orcid"))),n.appendChild(document.createTextNode("View ORCiD profile")),e.appendChild(n),e})(n,r);let i;return(t||e)&&((i=document.createElement("div")).className="app-researcher-popup__contacts",t&&i.appendChild(t),e)&&i.appendChild(e),i})(t,n,e),n=document.createDocumentFragment(),s&&n.appendChild(s),t&&n.appendChild(t),n}function n(t){var e,n,i,r,o=document.querySelector("#".concat(t," .c-article-authors-search__list"));if(o)return e=(o=o.cloneNode(!0)).querySelector(".js-search-name"),!!(n=o.querySelector("a.c-article-button"))&&(A(t)?(t=t,(i=E.researcherProfileLink.has(t)?E.researcherProfileLink.get(t):!(i=S())||(r=C(t))<0?(E.researcherProfileLink.set(t,null),null):(r=0<(i=L(i,r)).length?i[0].querySelector("a.js-cta-popup-link"):null,E.researcherProfileLink.set(t,r),r))&&(t=i.cloneNode(!0),o.appendChild(t),n.parentNode.replaceChild(t,n))):((r=document.createElement("span")).textContent="Search all author publications",(t=document.createElement("span")).classList.add("eds-c-button","eds-c-button--secondary","app-researcher-popup__cta"),n.classList.remove("c-article-button"),n.classList.add("js-cta-popup-link","c-article-authors-search__cta-link"),n.textContent="",t.appendChild(O("icon-eds-i-search-medium","c-article-authors-search__cta-icon")),t.appendChild(r),n.appendChild(t)),e&&e.parentNode.removeChild(e),o)}u;var i=t.getAttribute(g),r=t.closest("li"),o=document.querySelectorAll('span[data-author-role-id="'+i+'"]'),a=t.cloneNode(!0),s=(x(a),document.createElement("div")),d=(s.tabIndex=0,s.id="popup-".concat(i),s.className="c-popup ".concat(d," ").concat(y),s.setAttribute("data-track-component","article body"),s.setAttribute("data-track-context",A(i)?b:v),document.createElement("section")),h=(t=>{t=t.getAttribute("data-corresp-id");let e;return(t?document.querySelector("#corresp-"+t):null)&&((e=document.createElement("p")).className="app-researcher-popup__label",e.textContent="Corresponding author"),e})(t);h&&d.appendChild(h),(h=((t,e,n)=>{var i=[];for(let t=0;n[t];++t){var r=n[t].textContent;!1===i.includes(r)&&i.push(r)}var o=document.createElement("div"),a=(o.className="app-researcher-popup__author-title",document.createElement("h3"));return a.id="author-"+e,a.className="app-researcher-popup__subheading",a.innerHTML=t.innerHTML,0<i.length&&((e=document.createElement("span")).className="u-unstyled",e.textContent=0<i.length?"(".concat(i.join(", "),")"):"",a.appendChild(e)),o.appendChild(a),o})(a,i,w(o)))&&d.appendChild(h),i.match(/^group/)?(o=(t=>{var e,n;if(t=document.querySelector("#"+t))return e=(t=t.cloneNode(!0)).querySelector("ul"),n=t.querySelector("h3"),e&&e.classList.add("c-article-author-institutional-author__author-list--popup"),n&&n.parentNode.removeChild(n),t.innerHTML.replaceAll(/[\n\r]/g,""),t})(i))&&d.appendChild(o):((h=e(a,r,i))&&d.appendChild(h),(o=n(i))&&d.appendChild(o)),s.appendChild(d),document.body.appendChild(s),new m(t,"popup-"+i,{MAX_WIDTH:"788px",MIN_WIDTH:"300px"}).open()}let s="c-article-author-list",c=s+"--expanded",l=a.nextElementSibling,u={};if(l&&l.classList.contains(s+"__button")){let e=l.querySelector("span"),n=e?e.textContent.replace(/\s+$/,"").split(/\s+/).pop():"authors",i=l.querySelector("use"),r=a.querySelector("li:last-child a").getAttribute("data-author-popup"),o="#popup-".concat(r);l.addEventListener("click",function(){var t;document.querySelector(o)&&(document.querySelector(o).remove(),t=r,u[t])&&delete u[t],a.classList.contains(c)?(a.classList.remove(c),l.setAttribute("aria-expanded","false"),i&&i.setAttribute("xlink:href","#icon-eds-i-chevron-down-medium"),e&&(e.textContent="Show "+n),k(l)):(t=w(a.querySelectorAll("."+s+"__item")).filter(function(t){return"none"===window.getComputedStyle(t,null).display}),a.classList.add(c),l.setAttribute("aria-expanded","true"),i&&i.setAttribute("xlink:href","#icon-eds-i-chevron-up-medium"),e&&(e.textContent="Show fewer "+n),k(0<t.length?t[0].querySelector("a"):l))})}a.classList.add("js-no-scroll");var t=a.querySelectorAll("li a[".concat(g,"]")),e=S();if(0<t.length)for(var n of Array.from(t))A(n.getAttribute(g))&&n.setAttribute("data-track-context",b);w(a.querySelectorAll("sup > a")).forEach(function(t){t.setAttribute("tabIndex","-1")}),a.addEventListener("click",function(t){t=t.target.closest("a");if(t){var n=t.getAttribute(g);if(n&&!u[n]){u[n]=1,i(t);let e=document.querySelector("#popup-".concat(n));new MutationObserver(t=>{t.forEach(t=>{t.target.classList.contains(y)||k(e)})}).observe(e,{attributes:!0,attributeFilter:["class"]})}}}),e&&e.classList.add(y)}}}function H(){var n="data-expandable-label",r="["+n+"]",o="[data-expandable-box]",a="c-article-box--expanded",s="a[href]";function i(t,e){var n=t.querySelector(o),i=t.querySelector(r);t.querySelectorAll(s).forEach(function(t){t.setAttribute("tabIndex","0")}),e&&(n.setAttribute("tabIndex","-1"),n.focus()),n.parentNode.classList.add(a),n.style.height="auto",n.removeAttribute("aria-hidden"),i.parentNode.setAttribute("aria-expanded","true"),i.textContent="Show less",t.isOpen=!0}function c(t,e){var n=t.querySelector(o),i=t.querySelector(r);t.querySelectorAll(s).forEach(function(t){t.setAttribute("tabIndex","-1")}),n.parentNode.classList.remove(a),n.style.height="95px",n.setAttribute("aria-hidden","true"),i.parentNode.setAttribute("aria-expanded","false"),i.textContent="Show more",e&&n.scrollIntoView(),t.isOpen=!1}return{init:function(t){(t||[]).forEach(function(e){var t=['<div class="c-article-box__controls">','<div class="c-article-box__fade"></div>','<button aria-expanded="false" aria-describedby="'+e.querySelector(".js-expandable-title").id+'"><span class="c-article-box__button-text" '+n+"></span></button>","</div>"].join("");e.insertAdjacentHTML("beforeend",t),c(e),e.querySelector("button").addEventListener("click",function(){var t;((t=e).isOpen?c:i)(t,!0)},!1)}),window.addEventListener("hashchange",function(){var t=location.hash?document.querySelector(location.hash):null,t=t&&t.closest(o);t&&i(t.parentNode)})}}}var N,I,P=H,R=()=>{var s,c,o="c-reading-companion",a="--active",t=o+"__section-item",l=t+a,u="--stuck",d=o+"__sticky",e="rc-sec-",r="rc-",h="rc-",p="data-tab-target",_="data-component",f="aria-selected",m="aria-controls",g="tabindex",b="data-src",v="data-srcset",y="data-component-mpu",E=!1,S=!1,A=0;function C(t,e){return Array.prototype.slice.call(t.querySelectorAll(e))}function i(t,e,n){return t.split(e).join(n)}function L(t){var e,n;this.html=(t.querySelector("a")?(e=t.innerHTML,(n=document.createElement("div")).innerHTML=e,C(n,"a").forEach(function(t){var e=document.createElement("span");t.href.includes("#Fn")&&e.classList.add("u-visually-hidden"),e.innerHTML=t.innerHTML,t.parentNode.replaceChild(e,t)}),n):t).innerHTML,this.text=i(t.textContent,/[^\d\sa-z]/gi,""),this.id=t.id}function w(t,e){var n=t.querySelector(".c-article-supplementary__title a");n?(this.id=t.id,this.caption=n.innerHTML,this.link=n.href,this.images=[this.placeholderFor(n,e)]):(this.id=(t.querySelector(".c-article-section__figure-caption")||{id:null}).id,this.caption=(t.querySelector("figcaption > b")||{innerHTML:"Figure"}).innerHTML,this.link=(t.querySelector(".c-article__pill-button")||{href:null}).href,this.images=this.findImages(t,e))}function k(t){var e=t.querySelector(".c-article-references__text");this.id=e.id,this.num=t.parentElement.querySelector(".c-article-references__item").dataset.counter||"",this.citation=e.innerHTML,this.links=this.findLinks(t)}function n(t){this.href=t.href,this.text=t.textContent,this.label=t.getAttribute("data-track-label")||"link",this.itemId=t.getAttribute("data-track-item_id")||"link",this.action=this.text.trim().toLowerCase()}function x(t){return document.getElementById(e+t)}function T(t,e){var n=o+"--highlighted",i="animationend";e&&(q(t),e.setAttribute(g,"-1"),e.focus(),e.classList.add(n),e.addEventListener(i,function t(){e.classList.remove(n),e.removeEventListener(i,t)}),e.scrollIntoView({block:"start"}))}function q(t,e){var n,i,t=s.querySelector("."+o+"__"+t),r=s.querySelector("."+o+"__panel"+a);t&&r&&(n=t.querySelector("img["+b+"]"),i=s.querySelector("button["+m+"="+t.id+"]"),n&&C(t,"picture").forEach(function(t){var e=t.querySelector("source"),t=t.querySelector("img");e.srcset=e.getAttribute(v),e.removeAttribute(v),t.src=t.getAttribute(b),t.removeAttribute(b)}),r&&((n=s.querySelector("button["+m+"="+r.id+"]")).setAttribute(f,"false"),n.setAttribute(g,"-1"),n.classList.remove(o+"__tab"+a),r.classList.remove(o+"__panel"+a),r.removeAttribute(g)),i.setAttribute(f,"true"),i.removeAttribute(g),i.classList.add(o+"__tab"+a),t.classList.add(o+"__panel"+a),e&&e.focus&&i.focus(),window.requestAnimationFrame(I))}function O(){var t=s.querySelector("."+o+"__panel"+a),e=t.querySelector("."+o+"__scroll-pane"),t=t.querySelector("["+y+"]"),n=t?(t=>{var e=t.offsetHeight;let n=window.getComputedStyle(t);return["top","bottom"].map(t=>parseInt(n["margin-".concat(t)],10)).reduce((t,e)=>t+e,e)})(t):0,i=c?A+(c.offsetHeight+8):A,r=e.getBoundingClientRect().top+A+n,e=e.offsetTop+i+n,i=window.innerHeight<=560;return!1===S&&420<=r&&t?"auto":r<window.innerHeight&&300<=window.innerHeight-r||S||i?r:e}function N(){var t=s.querySelector("."+o+"__panel"+a).querySelector("."+o+"__scroll-pane"),e=O();t.style.maxHeight="auto"===e?"none":window.innerHeight-e+"px"}function I(){var t=document.querySelector("div["+_+"=article-container]"),e=c?A+(c.offsetHeight+8):A,n=s.parentNode.getBoundingClientRect().top<=e,i=s.offsetHeight,t=t.getBoundingClientRect().bottom-document.documentElement.clientTop-(i+e),i=d+u,r=s.classList,o=(S=r.contains(i),0<s.getBoundingClientRect().width);!S&&n&&o?(r.add(i),S=!0):S&&!n&&o&&(r.remove(i),S=!1),S&&o&&(s.style.width=s.parentNode.getBoundingClientRect().width+"px"),t<=0?s.style.top=t+e+"px":(s.style.top=e+"px",N())}function M(t,e){if(s.querySelector("."+o+"__sections-list")){let a=s.querySelector("."+o+"__sections-list").parentNode;e.on("nav.section",function(t,e){var n,i,r,o,e=e&&x(e),t=t&&x(t);e&&e.classList.remove(l),t&&(t.classList.add(l),e=t,t=a,n=t.clientHeight,r=(i=t.scrollTop+t.offsetTop)+n,n/=4,o=e.offsetTop,e=o+e.clientHeight,o<i?t.scrollTop-=i-o+n:r<e&&(t.scrollTop+=e-r+n))}),e.on("nav.figure",function(t){T("figures",document.getElementById(r+t))}),e.on("nav.reference",function(t,e){var n,i,t=document.getElementById(h+t);e&&(e=e,(i=(n=t).querySelector("."+o+"__return"))&&i.parentNode.removeChild(i),(i=document.createElement("a")).href="#"+e.id,i.appendChild(document.createTextNode("Return to ref "+e.textContent+" in article")),i.className=o+"__return",i.addEventListener("click",function(){i.parentNode.removeChild(i)}),n.appendChild(i)),T("references",t)}),t.on("scroll resize orientationchange",I);e=c?A+(c.offsetHeight+8):A,t=(window.pageYOffset>e&&window.requestAnimationFrame(I),s.querySelector("."+o+"__tabs"));t&&(t.addEventListener("keydown",function(t){var e,n=document.activeElement.parentNode;"ArrowLeft"===t.key?e=n.previousElementSibling||s.querySelector("."+o+"__tabs > li:last-child"):"ArrowRight"===t.key&&(e=n.nextElementSibling||s.querySelector("."+o+"__tabs > li:first-child")),e&&q(e.querySelector("["+p+"]").getAttribute(p),{focus:!0})},!1),C(t,"."+o+"__tab").forEach(function(t){t.addEventListener("click",function(t){q(t.target.getAttribute(p),{focus:!0})},!1)}))}}function D(t,e){t.insertAdjacentHTML("beforebegin",e)}function F(){var t=["sections","figures","references"].map(function(t){var e,n=document.querySelector("."+o+"__"+t),i=(r=t,e=C(document,".js-"+o+"-"+t+"-item"),(i={sections:function(t){var e=[];return t.forEach(function(t){e.push(new L(t))}),0<e.length?'<ul class="'+o+'__sections-list">'+e.map(function(t){return t.render()}).join("")+"</ul>":""},figures:function(t){var n=[];return t.forEach(function(t,e){t=new w(t,e+1);t.id&&n.push(t)}),n.length?'<ul class="'+o+'__figures-list">'+n.map(function(t){return t.render()}).join("")+"</ul>":""},references:function(t){var e=[];return t.forEach(function(t){e.push(new k(t))}),e.length?'<ol class="'+o+"__references-list"+(e[0].num?" "+o+"__references-list--numeric":"")+'" data-track-context="article references sidebar">'+e.map(function(t){return t.render()}).join("")+"</ol>":""}})[r]?i[r](e):""),r=(e=(r=t).charAt(0).toUpperCase()+t.substring(1),'<li role="presentation"><button '+p+'="'+r+'" role="tab" id="tab-'+r+'" '+m+'="tabpanel-'+r+'" '+f+'="false" '+g+'="-1" class="'+o+'__tab" data-track="click" data-track-action="'+r+' tab" data-track-label="tab">'+e+"</button></li>");return i&&n?(n.setAttribute("aria-labelledby","tab-"+t),n.setAttribute("role","tabpanel"),e='<div class="'+o+'__scroll-pane">'+i+"</div>",n.insertAdjacentHTML("afterbegin",e)):n&&n.parentNode.removeChild(n),!(!i||!n)&&r}).filter(function(t){return Boolean(t)}),e=s.querySelector("."+o+"__panel"),n=t.length;return 1<n?D(e,'<ul class="'+o+'__tabs" role="tablist">'+t.join("")+"</ul>"):1===n&&D(e,'<h3 class="'+o+'__heading u-font-family-sans">Sections</h3>'),n}return L.prototype.render=function(){return'<li id="'+e+this.id+'" class="'+t+'"><a href="#'+this.id+'" data-track="click" data-track-action="section anchor" data-track-label="link:'+i(this.text,/(^\d+)/g,"")+'">'+this.html+"</a></li>"},w.prototype={findImages:function(t,e){var n=[],i=this;return C(t,"picture > img").forEach(function(t){n.push(i.placeholderFor(t,e))}),n},placeholderFor:function(t,e){var n=t.getAttribute("data-supp-info-image")||t.src,t=t.alt||"extended data figure "+e,e=r+this.id,i=-1===n.indexOf("?")?"?":"&";return["<picture>","<source "+v+'="'+n+i+'">',"<img "+b+'="'+n+'" alt="'+t+'" aria-describedby="'+e+'"/>',"</picture>"].join("")},render:function(){return['<li class="'+o+'__figure-item">',"<figure>",'<figcaption><b class="'+o+'__figure-title u-h4" id="'+r+this.id+'">'+this.caption+"</b></figcaption>",this.images.join(""),this.link||this.id?'<p class="'+o+'__figure-links">':"",this.id&&E?'<a href="#'+this.id+'" data-track="click" data-track-action="figure anchor" data-track-label="link">View in article</a>':"",this.link&&E?'<a href="'+this.link+'" class="'+o+'__figure-full-link" data-track="click" data-track-action="view figure" data-track-label="link" rel="nofollow">Full size image<svg width="16" height="16" class="u-icon"><use href="#icon-chevron-right"/></svg></a>':"",this.link||this.id?"</p>":"","</figure>","</li>"].join("")}},k.prototype.findLinks=function(t){var e=[];return C(t,".c-article-references__links a").forEach(function(t){e.push(new n(t))}),e},k.prototype.render=function(){return['<li class="'+o+'__reference-item">','<p class="'+o+'__reference-citation u-font-family-serif" id="'+h+this.id+'">'+this.citation+"</p>",0<this.links.length?'<p class="'+o+'__reference-links">'+this.links.map(function(t){return t.render()}).join("")+"</p>":"","</li>"].join("")},n.prototype.render=function(){return'<a href="'+this.href+'" data-track="click_references" data-track-action="'+this.action+' reference" data-track-value="'+this.action+' reference" data-track-label="'+this.label+'" data-track-item_id="'+this.itemId+'">'+this.text+"</a>&nbsp;"},{init:function(t,e,n){E=Boolean(t.access),A=t.offset||0;function i(t){o(t),n.emit("rc.display",!t.matches&&r)}var r=!1,o=function(t){r||t.matches||(s=document.querySelector("["+_+"=reading-companion-sticky]"))&&(c=document.querySelector("[data-context-bar]"),0!==(t=F()))&&(M(e,n),1<t&&q("sections"),N(),r=!0)},t=window.matchMedia(t.matchMediaQuery||"(max-width: 1023px)");t.addListener(i),i(t)}}};function j(){var a,s=null,c=[],t=null,i=0,l=!1,r=null;function u(){return r?i+(r.offsetHeight+8):i}function d(){N.addEventListener("scroll",function t(){N.removeEventListener("scroll",t),setTimeout(function(){N.scrollBy(0,-1*u())},1)},!1)}function o(){function n(t){return t.getBoundingClientRect().top-e}var i=N.innerHeight,e=I.documentElement.clientTop,r=null,o=u();c.forEach(function(t){var e;n(t)<=o+i/2&&(!r||(e=I.getElementById(r),n(e)<=o-e.offsetHeight))&&(r=t.id)}),r!==t&&(s.emit("nav.section",r,t),t=r)}function h(e){function t(t){return e.nodeName.toLowerCase()===t}var n,i,r,o,a;e&&(n=e.hasAttribute("tabindex"),i=t("a")&&e.href,r=t("button"),o=t("input"),a=t("textarea"),!e.getAttribute("disabled")&&(n||i||r||o||a)||e.setAttribute("tabindex","-1"),e.focus())}function p(t){var e,n,i,r,o=null;!(o=t.target&&t.target.closest?t.target.closest("a"):o)||!o.hash||a&&o.closest(a)||o.pathname===N.location.pathname&&(n=!(e=!(!(i=(e=o).hash)||(t=>Boolean(t.closest(".c-reading-companion")))(e))&&i.match(/#(Fig|f|sf)\d+/))&&!!(i=(i=o).hash)&&(n=I.querySelector('div[data-container-section="references"]'))&&Boolean(n.querySelector(i)),i=o.hash.slice(1),r=I.getElementById(i),l&&(e||n)?(e?s.emit("nav.figure",i,o):n&&s.emit("nav.reference",i,o),t.preventDefault()):(s.emit("nav.anchor",i,o),h(r),d()))}return{init:function(t,e,n){r=I.querySelector("[data-context-bar]"),c=I.querySelectorAll(".js-section-title"),i=t.offset||0,a=t.exclude||"js-no-scroll",(s=n).on("rc.display",function(t){l=t}),e.on("scroll resize orientationchange",o),I.body.addEventListener("click",p,!1),N.location.hash&&d()}}}N=window,I=document;var B=j;function K(){function n(t){p=document.querySelector("."+e),f(t).then(function(t){t.url?(p.textContent=t.url,g(r),b()):g(o)}).catch(function(){g(o)})}function i(t){m(t,u)}var e="js-share-url",t="js-copy-share-url",r="js-share-url-container",o="js-no-share-url-container",a="c-article-share-box",s=a+"__only-read-input--highlighted",c="u-display-none",l="u-display-inline",u="u-display-block",d="hidden",h=null,p=null,_=!1,f=function(i){return new Promise(function(t,e){var n=new XMLHttpRequest;n.addEventListener("load",function(){n.readyState===n.DONE&&(200===n.status?t(JSON.parse(n.responseText)):e())}),n.open("GET",i),n.send()})},m=function(t,e){t=document.querySelector("."+t);t.classList.remove(c),t.classList.add(e),t.removeAttribute(d)},g=function(t){h.classList.add(c),h.setAttribute(d,""),m(t,l)},b=function(){document.querySelector("."+t).addEventListener("click",function(){v(p),y(),document.execCommand("copy"),setTimeout(y,500)})},v=function(t){var e=window.getSelection();t?e.selectAllChildren(t):e.removeAllRanges()},y=function(){_=_?(p.classList.remove(s),!1):(p.classList.add(s),!0)};return{init:function(t){var e=t&&t.doi?t.doi:"",t=(t&&t.url?t.url:"")+e;""!==t&&((e=document.querySelector('[data-component="share-box"]'))&&i(a),Boolean(e))&&!function(t){(h=document.querySelector(".js-get-share-url")).addEventListener("click",n.bind(this,t))}(t)}}}var U=K;let G={STICKY_FROM_SELECTOR:".js-context-bar-sticky-point-mobile",STICKY_FROM_DESKTOP_SELECTOR:".js-context-bar-sticky-point-desktop",COMPONENT_SELECTOR:"[data-context-bar]",HIDE_CLASS:"u-hide"},M="c-context-bar--sticky";class W{constructor(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._options=Object.assign({},G,e),this._component=document.querySelector(this._options.COMPONENT_SELECTOR),document.querySelector(".js-context-bar-sticky-point-masthead")&&(this._options.STICKY_FROM_SELECTOR=this._options.STICKY_FROM_DESKTOP_SELECTOR=".js-main-column"),t&&this._component&&(this._scheduler=t,this._stickyFrom=document.querySelector(this._options.STICKY_FROM_SELECTOR),this._stickyFromDesktop=document.querySelector(this._options.STICKY_FROM_DESKTOP_SELECTOR),this._stickyFrom||this._stickyFromDesktop)&&(this._button=this._component.querySelector(".c-pdf-download"),this._stickyPoint=0,this._init(),0<window.scrollY)&&this._update()}_init(){this._scheduler.on("scroll orientationchange resize",this._update.bind(this))}_handleButton(){this._button?(this._addGAButtonTracking(),this._button.querySelector("a").setAttribute("tabindex","-1")):this._component.classList.add("c-context-bar--no-button")}_preventDisplayingSmallViewport(){return window.innerWidth<211}_update(){var t=window.matchMedia("(min-width: 1023px)").matches?this._stickyFromDesktop:this._stickyFrom;t&&(this._stickyPoint=t.offsetTop-8-window.pageYOffset,this._stickyPoint<=0&&this._handleButton(),this._toggleBanner())}_addGAButtonTracking(){this._button.querySelector("a").setAttribute("data-track-label","button sticky");var t=this._button.querySelector("a").getAttribute("href").split("?")[0];this._button.querySelector("a").setAttribute("href",t)}_toggleBanner(){var t=this._preventDisplayingSmallViewport();this._stickyPoint<=0&&!t?(this._component.classList.remove(this._options.HIDE_CLASS),this._component.classList.add(M),this._component.setAttribute("aria-hidden",!1)):(this._component.classList.add(this._options.HIDE_CLASS),this._component.classList.remove(M),this._component.setAttribute("aria-hidden",!0))}}function V(){return{init:function(t,e,n){(t||[]).forEach(function(t){this.bindEvents(t,e,n)},this)},bindEvents:function(i,t,e){function n(){var t,e,n;n=(e="c-table-scroll-wrapper__fade")+"--transparent",0<(t=i).scrollWidth-(t.scrollLeft+t.clientWidth)?(t.classList.add(e),t.classList.remove(n)):t.classList.add(n)}e.on("load resize",n),i.addEventListener("scroll",t(n,{wait:100}),!1)}}}var z=V;function Y(){let t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];new MutationObserver(()=>{t.forEach(t=>{var e,n=t.querySelector(".mi-big-play-cover");n&&(t=t.getAttribute("video-id"),(e=n).setAttribute("aria-describedby","video-description-".concat(t)),e.setAttribute("aria-label","Play video"),e.setAttribute("role","button"),e.setAttribute("tabIndex","0"),e.addEventListener("keypress",t=>{X(t,e)},!1))})}).observe(document,{childList:!0,subtree:!0})}let X=(t,e)=>{"Enter"!==t.key&&" "!==t.key||(e&&e.removeAttribute("tabIndex"),t.currentTarget.click(),t.preventDefault())};function $(){figshare.load("springer_nature",function(t){var e=document.querySelector("#figshareContainer"),t=new t({version:"3",width:650,height:450,breakPoint:550,showStats:!1,showPageInfo:!1,showShareButton:!1,showFileDetails:!0,preferFileMetadata:!0,collection:{resourceDOI:null},item:{resourceDOI:(((window.dataLayer||[{}])[0].content||{}).article||{}).doi||""}});t.on("mount",function(){}),t.on("unmount",function(){}),t.on("loading",function(){}),t.on("canDisplay",function(){}),t.on("done",function(){}),t.on("filesError",function(){}),t.on("openInFigshare",function(){}),t.on("error",function(){}),t.initialize(),t.mount(e)})}function J(){var t=document.querySelector("#figshareContainer");if(t){let r=new IntersectionObserver(function(e){for(let t=0;e[t];++t)if(e[t].isIntersecting&&1023<document.documentElement.clientWidth){n=$,i=void 0,(i=document.createElement("script")).async="async",i.addEventListener("load",n),i.src="https://widgets.figshare.com/static/figshare.js",document.head.append(i),r.disconnect();break}var n,i},{rootMargin:"100px 0px 100px 0px",threshold:0});r.observe(t)}}let D={init:()=>{var t=document.querySelector('[data-component-authors-activator="authors-list"]');var e,n={EventEmitter:a,ShareBox:U,InternalNavigation:B,Scheduler:f,AuthorList:F,ScrollWrapper:z,Boxes:P};for(e in Component=Component||{},n)Object.prototype.hasOwnProperty.call(n,e)&&(Component[e]=new n[e]);NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach),Component.ContextBar=new W(Component.Scheduler),r=Component.EventEmitter,i={offset:32,exclude:"js-no-scroll",access:!0},Component.InternalNavigation.init(i,Component.Scheduler,r),Component.EventEmitter.on("rc.display",()=>{var t=document.querySelector(".c-reading-companion [data-component-mpu]");t&&(t.classList.remove("u-hide"),t.classList.add("u-show"))}),R().init({offset:32,exclude:"js-no-scroll",access:!0},Component.Scheduler,Component.EventEmitter);var i,r=(i=document.querySelector('meta[name="DOI"]'))?i.getAttribute("content"):"",t=(r&&Component.ShareBox.init({doi:r,url:"/shared-it?doi="}),t&&(i=t.getAttribute("data-etal")||null,r=t.getAttribute("data-etal-small")||i,Component.AuthorList.create(t,{etal:i,etalSmallscreen:r})),Component.ScrollWrapper.init(document.querySelectorAll("[data-component-scroll-wrapper]"),o,Component.Scheduler),Component.Boxes.init(document.querySelectorAll("div[data-expandable-box-container]")),Array.prototype.slice.call(document.querySelectorAll('[mi24-video-player="true"]'),0));0<t.length&&Y(t),J()}};"loading"===document.readyState?document.addEventListener&&document.addEventListener("DOMContentLoaded",function(){D.init()},!1):D.init()})();

//# sourceMappingURL=global-article-es5-bundle-4ad7d78bac.js.map
